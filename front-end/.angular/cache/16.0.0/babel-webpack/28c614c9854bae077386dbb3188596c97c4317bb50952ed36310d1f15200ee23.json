{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../service/product.service\";\nclass PaginationComponent {\n  constructor(http, productService) {\n    this.http = http;\n    this.productService = productService;\n    this.apiUrl_all = \"http://localhost:8080/products/count\";\n    this.apiUrl_category = \"http://localhost:8080/products/{categoryType}/count\";\n    this.itemsPerPage = 10;\n    this.currentPage = 1;\n    this.pageChanged = new EventEmitter();\n    this.totalItems = 0;\n  }\n  ngOnInit() {\n    this.categorySubscription = this.productService.categorySelected$.subscribe(category => {\n      this.currentPage = 1;\n      this.fetchTotalItems();\n    });\n  }\n  fetchTotalItems() {\n    let currentCategory = this.productService.getCurrentCategory();\n    let apiUrl = currentCategory && currentCategory !== \"All\" ? this.apiUrl_category.replace('{categoryType}', currentCategory) : this.apiUrl_all;\n    this.http.get(apiUrl).subscribe(response => {\n      this.totalItems = response.totalCount;\n    }, error => {\n      alert(\"Error: \" + error.message);\n    });\n  }\n  get totalPages() {\n    return Math.ceil(this.totalItems / this.itemsPerPage);\n  }\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n  prevPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n}\nPaginationComponent.ɵfac = function PaginationComponent_Factory(t) {\n  return new (t || PaginationComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ProductService));\n};\nPaginationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PaginationComponent,\n  selectors: [[\"app-pagination\"]],\n  outputs: {\n    pageChanged: \"pageChanged\"\n  },\n  decls: 7,\n  vars: 2,\n  consts: [[1, \"pagination\"], [3, \"click\"]],\n  template: function PaginationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function PaginationComponent_Template_button_click_1_listener() {\n        return ctx.prevPage();\n      });\n      i0.ɵɵtext(2, \"Previous\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"span\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function PaginationComponent_Template_button_click_5_listener() {\n        return ctx.nextPage();\n      });\n      i0.ɵɵtext(6, \"Next\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", ctx.currentPage, \" / \", ctx.totalPages, \"\");\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { PaginationComponent };","map":{"version":3,"names":["EventEmitter","PaginationComponent","constructor","http","productService","apiUrl_all","apiUrl_category","itemsPerPage","currentPage","pageChanged","totalItems","ngOnInit","categorySubscription","categorySelected$","subscribe","category","fetchTotalItems","currentCategory","getCurrentCategory","apiUrl","replace","get","response","totalCount","error","alert","message","totalPages","Math","ceil","nextPage","emit","prevPage","i0","ɵɵdirectiveInject","i1","HttpClient","i2","ProductService","selectors","outputs","decls","vars","consts","template","PaginationComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","PaginationComponent_Template_button_click_1_listener","ɵɵtext","ɵɵelementEnd","PaginationComponent_Template_button_click_5_listener","ɵɵadvance","ɵɵtextInterpolate2"],"sources":["C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\pagination\\pagination.component.ts","C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\pagination\\pagination.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { ProductService } from '../service/product.service';\r\nimport { Subscription } from 'rxjs/internal/Subscription';\r\n\r\n@Component({\r\n  selector: 'app-pagination',\r\n  templateUrl: './pagination.component.html',\r\n  styleUrls: ['./pagination.component.css']\r\n})\r\nexport class PaginationComponent implements OnInit {\r\n  apiUrl_all: string = \"http://localhost:8080/products/count\";\r\n  apiUrl_category: string = \"http://localhost:8080/products/{categoryType}/count\";\r\n  itemsPerPage: number = 10;\r\n  currentPage: number = 1;\r\n  @Output() pageChanged = new EventEmitter<number>();\r\n  private categorySubscription!: Subscription;\r\n\r\n  totalItems: number = 0;\r\n\r\n  constructor(private http: HttpClient, private productService: ProductService) {}\r\n\r\n  ngOnInit() {\r\n    this.categorySubscription = this.productService.categorySelected$.subscribe(category => {\r\n      this.currentPage = 1;\r\n      this.fetchTotalItems();\r\n    });\r\n  }\r\n\r\n  fetchTotalItems() {\r\n    let currentCategory = this.productService.getCurrentCategory();\r\n    let apiUrl = (currentCategory && currentCategory !== \"All\") ? \r\n                 this.apiUrl_category.replace('{categoryType}', currentCategory) : \r\n                 this.apiUrl_all;\r\n    this.http.get<any>(apiUrl).subscribe(\r\n      response => {\r\n        this.totalItems = response.totalCount;\r\n      },\r\n      error => {\r\n        alert(\"Error: \" + error.message);\r\n      }\r\n    );\r\n  }\r\n\r\n  get totalPages(): number {\r\n    return Math.ceil(this.totalItems / this.itemsPerPage);\r\n  }\r\n\r\n  nextPage() {\r\n    if (this.currentPage < this.totalPages) {\r\n      this.currentPage++;\r\n      this.pageChanged.emit(this.currentPage);\r\n    }\r\n  }\r\n\r\n  prevPage() {\r\n    if (this.currentPage > 1) {\r\n      this.currentPage--;\r\n      this.pageChanged.emit(this.currentPage);\r\n    }\r\n  }\r\n}\r\n","<div class=\"pagination\">\r\n    <button (click)=\"prevPage()\">Previous</button>\r\n    <span>{{ currentPage }} / {{ totalPages }}</span>\r\n    <button (click)=\"nextPage()\">Next</button>\r\n  </div>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}