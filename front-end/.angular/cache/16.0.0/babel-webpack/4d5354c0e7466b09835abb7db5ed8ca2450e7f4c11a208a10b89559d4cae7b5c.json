{"ast":null,"code":"import { filter } from 'rxjs';\nimport { NavigationEnd } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/product.service\";\nimport * as i2 from \"../service/cart.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../pagination/pagination.component\";\nfunction ProductListComponent_h2_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Current Category: \", ctx_r0.currentCategory, \"\");\n  }\n}\nfunction ProductListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"img\", 5);\n    i0.ɵɵelementStart(2, \"h5\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_div_2_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.addToCart(product_r2));\n    });\n    i0.ɵɵtext(8, \"Add to cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h3\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r2.productName);\n    i0.ɵɵproperty(\"src\", product_r2.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", product_r2.price, \" USD\");\n  }\n}\nclass ProductListComponent {\n  constructor(productService, cartService, router) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.router = router;\n    this.apiURL = \"http://localhost:8080/\";\n    this.currentPage = 1; // <-- Add this property here\n    this.itemsPerPage = 10; // If you're also using itemsPerPage \n    this.products = [];\n    this.productQuantities = {}; // Object to store product quantities\n    this.currentCategory = '';\n  }\n  ngOnInit() {\n    // Initial load of products\n    this.productService.getProducts(0).subscribe(data => {\n      this.products = data;\n    });\n    // Subscribe to categorySelected\n    this.categorySubscription = this.productService.categorySelected$.subscribe(category => {\n      this.currentCategory = category; // Set the current category here\n      if (category === 'All') {\n        this.productService.getProducts(0).subscribe(data => {\n          this.products = data;\n        });\n      } else {\n        this.productService.getProductsByCategory(category, 0).subscribe(data => {\n          this.products = data;\n        });\n      }\n    });\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {\n      // Refresh username\n      if (event.url === '/' || event.url === '') {\n        this.productService.getProducts(0).subscribe(data => {\n          this.products = data;\n        });\n        // Execute some code here if navigated to home page\n      }\n      // // Emit hideProductList\n      // if (this.username) {\n      //   this.userLoggedIn.emit();\n      //   // Execute some code here when username exists\n      // }\n    });\n  }\n\n  addToCart(product) {\n    this.cartService.addProduct(product);\n  }\n  onPageChange(page) {\n    this.currentPage = page;\n    // Check for selected category and load products accordingly\n    let currentCategory = this.productService.getCurrentCategory();\n    if (currentCategory === 'All') {\n      this.productService.getProducts(this.currentPage - 1).subscribe(data => {\n        this.products = data;\n        // You might also want to update totalItems here based on the response, for the paginator to work correctly.\n      });\n    } else {\n      this.productService.getProductsByCategory(currentCategory, this.currentPage - 1).subscribe(data => {\n        this.products = data;\n        // You might also want to update totalItems here based on the response, for the paginator to work correctly.\n      });\n    }\n  }\n}\n\nProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n  return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.Router));\n};\nProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductListComponent,\n  selectors: [[\"app-product-list\"]],\n  decls: 4,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [2, \"display\", \"flex\", \"flex-wrap\", \"wrap\", \"justify-content\", \"space-between\"], [\"style\", \"flex: 0 0 calc(33.333% - 20px); box-sizing: border-box; margin: 10px; background: #f9f9f9; padding: 20px; border: 1px solid #ddd; border-radius: 5px;\", 4, \"ngFor\", \"ngForOf\"], [3, \"pageChanged\"], [2, \"flex\", \"0 0 calc(33.333% - 20px)\", \"box-sizing\", \"border-box\", \"margin\", \"10px\", \"background\", \"#f9f9f9\", \"padding\", \"20px\", \"border\", \"1px solid #ddd\", \"border-radius\", \"5px\"], [2, \"width\", \"100%\", 3, \"src\", \"alt\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\"], [3, \"click\"]],\n  template: function ProductListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductListComponent_h2_0_Template, 2, 1, \"h2\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵtemplate(2, ProductListComponent_div_2_Template, 11, 5, \"div\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"app-pagination\", 3);\n      i0.ɵɵlistener(\"pageChanged\", function ProductListComponent_Template_app_pagination_pageChanged_3_listener($event) {\n        return ctx.onPageChange($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.currentCategory !== \"All\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.PaginationComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ProductListComponent };","map":{"version":3,"names":["filter","NavigationEnd","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","currentCategory","ɵɵelement","ɵɵlistener","ProductListComponent_div_2_Template_button_click_7_listener","restoredCtx","ɵɵrestoreView","_r4","product_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","addToCart","ɵɵpropertyInterpolate","productName","ɵɵproperty","image","ɵɵsanitizeUrl","ɵɵtextInterpolate","description","price","ProductListComponent","constructor","productService","cartService","router","apiURL","currentPage","itemsPerPage","products","productQuantities","ngOnInit","getProducts","subscribe","data","categorySubscription","categorySelected$","category","getProductsByCategory","events","pipe","event","url","product","addProduct","onPageChange","page","getCurrentCategory","ɵɵdirectiveInject","i1","ProductService","i2","CartService","i3","Router","selectors","decls","vars","consts","template","ProductListComponent_Template","rf","ctx","ɵɵtemplate","ProductListComponent_h2_0_Template","ProductListComponent_div_2_Template","ProductListComponent_Template_app_pagination_pageChanged_3_listener","$event"],"sources":["C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\product-list\\product-list.component.ts","C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\product-list\\product-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ProductService } from '../service/product.service';\r\nimport { Product } from '../models/product.model';\r\nimport { CartService } from '../service/cart.service';\r\nimport { Subscription, filter } from 'rxjs';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-product-list',\r\n  templateUrl: './product-list.component.html',\r\n  styleUrls: ['./product-list.component.css']\r\n})\r\nexport class ProductListComponent implements OnInit {\r\n\r\n  apiURL = \"http://localhost:8080/\"\r\n  currentPage = 1; // <-- Add this property here\r\n  itemsPerPage = 10; // If you're also using itemsPerPage \r\n  products: Product[] = [];\r\n  productQuantities: { [key: number]: number } = {}; // Object to store product quantities\r\n  categorySubscription!: Subscription;\r\n  currentCategory: string = '';\r\n\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n    private cartService: CartService,\r\n    private router: Router\r\n  ) { }\r\n\r\n\r\n  ngOnInit(): void {\r\n\r\n    // Initial load of products\r\n    this.productService.getProducts(0).subscribe(data => {\r\n      this.products = data;\r\n    });\r\n\r\n    // Subscribe to categorySelected\r\n    this.categorySubscription = this.productService.categorySelected$.subscribe((category: string) => {\r\n      this.currentCategory = category; // Set the current category here\r\n\r\n      if (category === 'All') {\r\n        this.productService.getProducts(0).subscribe(data => {\r\n          this.products = data;\r\n        });\r\n      } else {\r\n        this.productService.getProductsByCategory(category,0).subscribe(data => {\r\n          this.products = data;\r\n        });\r\n      }\r\n    });\r\n\r\n\r\n    this.router.events.pipe(\r\n      filter((event): event is NavigationEnd => event instanceof NavigationEnd)\r\n    ).subscribe((event: NavigationEnd) => {\r\n      // Refresh username\r\n      if (event.url === '/' || event.url === '') {\r\n        this.productService.getProducts(0).subscribe(data => {\r\n          this.products = data;\r\n        });\r\n        // Execute some code here if navigated to home page\r\n      }\r\n    \r\n\r\n      // // Emit hideProductList\r\n      // if (this.username) {\r\n      //   this.userLoggedIn.emit();\r\n      //   // Execute some code here when username exists\r\n      // }\r\n        \r\n\r\n    });\r\n    \r\n  }\r\n\r\n  addToCart(product: Product): void {\r\n    this.cartService.addProduct(product);\r\n  }\r\n\r\n  \r\n\r\n  onPageChange(page: number) {\r\n    this.currentPage = page;\r\n    \r\n    // Check for selected category and load products accordingly\r\n    let  currentCategory = this.productService.getCurrentCategory();\r\n    \r\n    if (currentCategory === 'All') {\r\n      this.productService.getProducts(this.currentPage - 1).subscribe(data => { // Page number starts from 0 in the backend\r\n        this.products = data;\r\n        // You might also want to update totalItems here based on the response, for the paginator to work correctly.\r\n      });\r\n    } else {\r\n\r\n\r\n      this.productService.getProductsByCategory(currentCategory, this.currentPage - 1).subscribe(data => {\r\n        this.products = data;\r\n        // You might also want to update totalItems here based on the response, for the paginator to work correctly.\r\n      });\r\n    }\r\n  }\r\n  \r\n  \r\n}\r\n","<h2 *ngIf=\"currentCategory !== 'All'\">Current Category: {{ currentCategory }}</h2>\r\n\r\n<div style=\"display: flex; flex-wrap: wrap; justify-content: space-between;\">\r\n  <div style=\"flex: 0 0 calc(33.333% - 20px); box-sizing: border-box; margin: 10px; background: #f9f9f9; padding: 20px; border: 1px solid #ddd; border-radius: 5px;\" *ngFor=\"let product of products\">\r\n    <img [src]=\"product.image\" alt=\"{{ product.productName }}\" style=\"width: 100%;\">\r\n    <h5>{{ product.productName }}</h5>\r\n    <p>{{ product.description }}</p>\r\n    <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n \r\n      <button (click)=\"addToCart(product)\">Add to cart</button>\r\n      <h3>{{ product.price }} USD</h3>\r\n    </div>\r\n  </div>\r\n</div>\r\n<app-pagination \r\n\r\n  (pageChanged)=\"onPageChange($event)\">\r\n</app-pagination>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}