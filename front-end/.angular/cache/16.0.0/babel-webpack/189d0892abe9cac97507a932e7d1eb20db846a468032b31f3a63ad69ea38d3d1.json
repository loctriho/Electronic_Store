{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\nimport { NavigationEnd } from '@angular/router';\nimport { filter } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"../service/product.service\";\nimport * as i4 from \"../service/cart.service\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"dropdown\"];\nconst _c1 = [\"menuIcon\"];\nfunction HeaderComponent_div_9_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 2);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_9_li_3_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const category_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.onCategorySelected(category_r9));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r9, \" \");\n  }\n}\nfunction HeaderComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14, 15)(2, \"ul\");\n    i0.ɵɵtemplate(3, HeaderComponent_div_9_li_3_Template, 2, 1, \"li\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.categories);\n  }\n}\nfunction HeaderComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 17);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_14_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.onLoginClicked());\n    });\n    i0.ɵɵtext(2, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_15_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onHideProductList());\n    });\n    i0.ɵɵtext(2, \"Register\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Welcome, \", ctx_r4.username, \"\");\n  }\n}\nfunction HeaderComponent_li_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 2);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_17_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.logout());\n    });\n    i0.ɵɵtext(2, \"Log Out\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 19);\n    i0.ɵɵtext(2, \"Account\");\n    i0.ɵɵelementEnd()();\n  }\n}\nclass HeaderComponent {\n  onLoginCompleted() {\n    this.loginCompleted.emit();\n  }\n  onLoginClicked() {\n    this.loginClicked.emit();\n  }\n  constructor(router, http, renderer, productService, cartService) {\n    this.router = router;\n    this.http = http;\n    this.renderer = renderer;\n    this.productService = productService;\n    this.cartService = cartService;\n    this.userLoggedIn = new EventEmitter();\n    this.loginClicked = new EventEmitter();\n    this.loginCompleted = new EventEmitter();\n    this.refresh = false;\n    this.hideProductList = new EventEmitter();\n    this.showProductList = new EventEmitter();\n    this.username = null;\n    this.password = null;\n    this.categories = [];\n    this.cartItemCount = 0;\n    this.selectedCategory = 'All';\n    this.isMenuDisplayed = false;\n  }\n  ngOnInit() {\n    this.username = localStorage.getItem('username');\n    this.password = localStorage.getItem('password');\n    this.getCategories();\n    this.cartService.cartItemCount.subscribe(count => {\n      this.cartItemCount = count;\n    });\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {\n      // Refresh username\n      this.username = localStorage.getItem('username');\n      this.password = localStorage.getItem('password');\n      console.log(\"Show product events\");\n      // Emit hideProductList\n      if (event.url === '/' || event.url === '') {\n        this.showProductList.emit();\n        return;\n        // Execute some code here if navigated to home page\n      }\n\n      this.hideProductList.emit();\n      // // Emit hideProductList\n      // if (this.username) {\n      //   this.userLoggedIn.emit();\n      //   // Execute some code here when username exists\n      // }\n    });\n  }\n\n  onCategorySelected(category) {\n    this.router.navigate(['/']);\n    this.selectedCategory = category;\n    this.productService.setSelectedCategory(category);\n  }\n  getCategories() {\n    this.http.get('http://localhost:8080/categories').subscribe(data => {\n      this.categories = data;\n    });\n  }\n  toggleMenu(event) {\n    if (event) {\n      if (this.menuIcon.nativeElement.contains(event.target)) {\n        // Toggle the menu display when clicking on the menu icon.\n        this.isMenuDisplayed = !this.isMenuDisplayed;\n      } else if (this.isMenuDisplayed === true) {\n        // Close the menu when clicking outside and the menu is displayed.\n        this.isMenuDisplayed = false;\n      }\n    }\n  }\n  handleClick(event) {\n    this.toggleMenu(event);\n  }\n  logout() {\n    const token = this.getCSRFToken();\n    if (token) {\n      this.username = localStorage.getItem('username');\n      this.password = localStorage.getItem('password');\n      const basicAuth = 'Basic ' + btoa(this.username + ':' + this.password);\n      const headers = new HttpHeaders({\n        'x-csrf-token': token,\n        'Authorization': basicAuth\n      });\n      this.http.post('http://localhost:8080/logout', {}, {\n        headers: headers,\n        withCredentials: true\n      }).subscribe(() => {\n        this.username = null;\n        localStorage.removeItem('username');\n        this.router.navigate(['/']);\n      }, error => {\n        console.error(error); // Log the error to console for debugging\n        // Use whatever method you prefer for showing the error to the user.\n        // This could be a simple alert, or a more user-friendly UI element in your application.\n        alert('Logout failed. Error: ' + error.message);\n      });\n    }\n  }\n  updateCartItemCount() {\n    this.cartItemCount = this.cartService.getCartSize();\n  }\n  onHideProductList() {\n    this.hideProductList.emit();\n  }\n  onShowProductList() {\n    this.hideProductList.emit();\n  }\n  returnToHomePage() {\n    this.productService.setSelectedCategory(\"All\");\n    this.router.navigate(['/']);\n    this.showProductList.emit();\n  }\n  createHeaders() {\n    const csrfToken = this.getCSRFToken();\n    const username = localStorage.getItem('username');\n    const password = localStorage.getItem('password');\n    let headers = new HttpHeaders();\n    if (csrfToken) {\n      headers = headers.append('x-csrf-token', csrfToken);\n    }\n    return headers;\n  }\n  getCSRFToken() {\n    return localStorage.getItem('csrfToken');\n  }\n}\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.CartService));\n};\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"app-header\"]],\n  viewQuery: function HeaderComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 7);\n      i0.ɵɵviewQuery(_c1, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dropdown = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.menuIcon = _t.first);\n    }\n  },\n  hostBindings: function HeaderComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function HeaderComponent_click_HostBindingHandler($event) {\n        return ctx.handleClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  inputs: {\n    refresh: \"refresh\"\n  },\n  outputs: {\n    userLoggedIn: \"userLoggedIn\",\n    loginClicked: \"loginClicked\",\n    loginCompleted: \"loginCompleted\",\n    hideProductList: \"hideProductList\",\n    showProductList: \"showProductList\"\n  },\n  decls: 24,\n  vars: 7,\n  consts: [[1, \"containerv2\"], [1, \"logo\", 2, \"display\", \"inline-block\"], [3, \"click\"], [\"src\", \"assets/images/computer.jpg\", \"alt\", \"Electronic Store\"], [2, \"display\", \"inline-block\"], [\"menuIcon\", \"\"], [\"id\", \"menu_icon\", \"src\", \"assets/images/menu_icon.png\", \"alt\", \"Menu Icon\"], [\"style\", \"display:inline-block\", \"class\", \"dropdown-content\", 4, \"ngIf\"], [1, \"search-bar\"], [\"type\", \"text\", \"placeholder\", \"Search\"], [4, \"ngIf\"], [\"routerLink\", \"/cart\", 3, \"click\"], [\"src\", \"assets/images/cart.png\", \"alt\", \"Shopping Cart\"], [1, \"cart-item-count\"], [1, \"dropdown-content\", 2, \"display\", \"inline-block\"], [\"dropdown\", \"\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"/login\", 3, \"click\"], [\"routerLink\", \"/register\", 3, \"click\"], [\"routerLink\", \"/account\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n      i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_2_listener() {\n        return ctx.returnToHomePage();\n      });\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(4, \" \\u00A0 \");\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"span\", null, 5);\n      i0.ɵɵelement(8, \"img\", 6);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(9, HeaderComponent_div_9_Template, 4, 1, \"div\", 7);\n      i0.ɵɵelementStart(10, \"div\", 8);\n      i0.ɵɵelement(11, \"input\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"nav\")(13, \"ul\");\n      i0.ɵɵtemplate(14, HeaderComponent_li_14_Template, 3, 0, \"li\", 10);\n      i0.ɵɵtemplate(15, HeaderComponent_li_15_Template, 3, 0, \"li\", 10);\n      i0.ɵɵtemplate(16, HeaderComponent_li_16_Template, 2, 1, \"li\", 10);\n      i0.ɵɵtemplate(17, HeaderComponent_li_17_Template, 3, 0, \"li\", 10);\n      i0.ɵɵelementStart(18, \"li\")(19, \"a\", 11);\n      i0.ɵɵlistener(\"click\", function HeaderComponent_Template_a_click_19_listener() {\n        return ctx.onHideProductList();\n      });\n      i0.ɵɵelement(20, \"img\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"span\", 13);\n      i0.ɵɵtext(22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(23, HeaderComponent_li_23_Template, 3, 0, \"li\", 10);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.isMenuDisplayed);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.username);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.username);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.username);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.username);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.cartItemCount);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.username);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i1.RouterLink],\n  styles: [\"*[_ngcontent-%COMP%] {\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\nbody[_ngcontent-%COMP%] {\\r\\n  font-family: Arial, sans-serif;\\r\\n  background-color: #f2f2f2;\\r\\n\\r\\n}\\r\\n\\r\\n.containerv2[_ngcontent-%COMP%] {\\r\\n  width:100%;\\r\\n\\r\\n  height:15%;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  background-color: #ffffff;\\r\\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\\r\\n}\\r\\n\\r\\n\\r\\n.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n  height: 50px;\\r\\n}\\r\\n\\r\\n.menu-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n  height: 24px;\\r\\n}\\r\\n\\r\\n.search-bar[_ngcontent-%COMP%] {\\r\\n  margin-left: 120px;\\r\\n  margin-right: 260px;\\r\\n  width:50%\\r\\n}\\r\\n\\r\\n.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\r\\n  width: 100%;\\r\\n  padding: 8px 16px;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 24px;\\r\\n  font-size: 14px;\\r\\n  background-color: #f2f2f2;\\r\\n  transition: all 0.3s;\\r\\n  margin-left:20%\\r\\n}\\r\\n\\r\\n.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus {\\r\\n  outline: none;\\r\\n  background-color: #ffffff;\\r\\n  border-color: #999999;\\r\\n}\\r\\n\\r\\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  list-style-type: none;\\r\\n}\\r\\n\\r\\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n  margin-left: 20px;\\r\\n}\\r\\n\\r\\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n  text-decoration: none;\\r\\n  color: #333;\\r\\n  font-size: 18px;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n}\\r\\n\\r\\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\r\\n  height: 24px;\\r\\n  margin-left: 5px;\\r\\n}\\r\\n#menu_icon[_ngcontent-%COMP%]{\\r\\npadding-top:5px; \\r\\n width:60px;\\r\\n height:70px;\\r\\n display: inline-block;\\r\\n\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n.cart-item-count[_ngcontent-%COMP%] {\\r\\n \\r\\n  background-color: red;\\r\\n  color: white;\\r\\n  padding: 2px 6px;\\r\\n  border-radius: 50%;\\r\\n  font-size: 12px;\\r\\n}\\r\\n.dropdown-content[_ngcontent-%COMP%]{\\r\\n  position: absolute;\\r\\n  z-index: 1; \\r\\n  margin-left:9%;\\r\\n  margin-top:9%;\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.dropdown-content.show[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n}\\r\\n\\r\\n.dropdown-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\r\\n  background-color: #f9f9f9; \\r\\n  list-style-type: none; \\r\\n  border: 1px solid #ccc; \\r\\n  border-radius: 4px; \\r\\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); \\r\\n  padding: 0; \\r\\n  width: 200px; \\r\\n}\\r\\n\\r\\n.dropdown-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n  padding: 10px 20px; \\r\\n  cursor: pointer; \\r\\n}\\r\\n\\r\\n.dropdown-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #e9e9e9; \\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaGVhZGVyL2hlYWRlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsU0FBUztFQUNULFVBQVU7RUFDVixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSw4QkFBOEI7RUFDOUIseUJBQXlCOztBQUUzQjs7QUFFQTtFQUNFLFVBQVU7O0VBRVYsVUFBVTtFQUNWLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIseUJBQXlCO0VBQ3pCLHdDQUF3QztBQUMxQzs7O0FBR0E7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CO0FBQ0Y7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixvQkFBb0I7RUFDcEI7QUFDRjs7QUFFQTtFQUNFLGFBQWE7RUFDYix5QkFBeUI7RUFDekIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixxQkFBcUI7QUFDdkI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLGVBQWU7RUFDZixhQUFhO0VBQ2IsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGdCQUFnQjtBQUNsQjtBQUNBO0FBQ0EsZUFBZTtDQUNkLFVBQVU7Q0FDVixXQUFXO0NBQ1gscUJBQXFCOzs7QUFHdEI7OztBQUdBOztFQUVFLHFCQUFxQjtFQUNyQixZQUFZO0VBQ1osZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLGNBQWM7RUFDZCxhQUFhO0VBQ2IsYUFBYTtBQUNmOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLHlCQUF5QixFQUFFLDBCQUEwQjtFQUNyRCxxQkFBcUIsRUFBRSx5QkFBeUI7RUFDaEQsc0JBQXNCLEVBQUUsZUFBZTtFQUN2QyxrQkFBa0IsRUFBRSxvQkFBb0I7RUFDeEMsNENBQTRDLEVBQUUsZUFBZTtFQUM3RCxVQUFVLEVBQUUsbUJBQW1CO0VBQy9CLFlBQVksRUFBRSxtQ0FBbUM7QUFDbkQ7O0FBRUE7RUFDRSxrQkFBa0IsRUFBRSxnQkFBZ0I7RUFDcEMsZUFBZSxFQUFFLDJCQUEyQjtBQUM5Qzs7QUFFQTtFQUNFLHlCQUF5QixFQUFFLCtCQUErQjtBQUM1RCIsInNvdXJjZXNDb250ZW50IjpbIioge1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbmJvZHkge1xyXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO1xyXG5cclxufVxyXG5cclxuLmNvbnRhaW5lcnYyIHtcclxuICB3aWR0aDoxMDAlO1xyXG5cclxuICBoZWlnaHQ6MTUlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMSk7XHJcbn1cclxuXHJcblxyXG4ubG9nbyBpbWcge1xyXG4gIGhlaWdodDogNTBweDtcclxufVxyXG5cclxuLm1lbnUtaWNvbiBpbWcge1xyXG4gIGhlaWdodDogMjRweDtcclxufVxyXG5cclxuLnNlYXJjaC1iYXIge1xyXG4gIG1hcmdpbi1sZWZ0OiAxMjBweDtcclxuICBtYXJnaW4tcmlnaHQ6IDI2MHB4O1xyXG4gIHdpZHRoOjUwJVxyXG59XHJcblxyXG4uc2VhcmNoLWJhciBpbnB1dCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgcGFkZGluZzogOHB4IDE2cHg7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICBib3JkZXItcmFkaXVzOiAyNHB4O1xyXG4gIGZvbnQtc2l6ZTogMTRweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzO1xyXG4gIG1hcmdpbi1sZWZ0OjIwJVxyXG59XHJcblxyXG4uc2VhcmNoLWJhciBpbnB1dDpmb2N1cyB7XHJcbiAgb3V0bGluZTogbm9uZTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gIGJvcmRlci1jb2xvcjogIzk5OTk5OTtcclxufVxyXG5cclxubmF2IHVsIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xyXG59XHJcblxyXG5uYXYgdWwgbGkge1xyXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xyXG59XHJcblxyXG5uYXYgdWwgbGkgYSB7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIGNvbG9yOiAjMzMzO1xyXG4gIGZvbnQtc2l6ZTogMThweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbm5hdiB1bCBsaSBhIGltZyB7XHJcbiAgaGVpZ2h0OiAyNHB4O1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7XHJcbn1cclxuI21lbnVfaWNvbntcclxucGFkZGluZy10b3A6NXB4OyBcclxuIHdpZHRoOjYwcHg7XHJcbiBoZWlnaHQ6NzBweDtcclxuIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuXHJcblxyXG59XHJcblxyXG5cclxuLmNhcnQtaXRlbS1jb3VudCB7XHJcbiBcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDJweCA2cHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxufVxyXG4uZHJvcGRvd24tY29udGVudHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgei1pbmRleDogMTsgXHJcbiAgbWFyZ2luLWxlZnQ6OSU7XHJcbiAgbWFyZ2luLXRvcDo5JTtcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4uZHJvcGRvd24tY29udGVudC5zaG93IHtcclxuICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuLmRyb3Bkb3duLWNvbnRlbnQgdWwge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7IC8qIExpZ2h0IGdyYXkgYmFja2dyb3VuZCAqL1xyXG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTsgLyogUmVtb3ZlIGJ1bGxldCBwb2ludHMgKi9cclxuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyAvKiBBZGQgYm9yZGVyICovXHJcbiAgYm9yZGVyLXJhZGl1czogNHB4OyAvKiBSb3VuZGVkIGNvcm5lcnMgKi9cclxuICBib3gtc2hhZG93OiAwcHggOHB4IDE2cHggMHB4IHJnYmEoMCwwLDAsMC4yKTsgLyogQWRkIHNoYWRvdyAqL1xyXG4gIHBhZGRpbmc6IDA7IC8qIFJlbW92ZSBwYWRkaW5nICovXHJcbiAgd2lkdGg6IDIwMHB4OyAvKiBGaXhlZCB3aWR0aCAtIGFkanVzdCBhcyBuZWVkZWQgKi9cclxufVxyXG5cclxuLmRyb3Bkb3duLWNvbnRlbnQgdWwgbGkge1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDsgLyogQWRkIHBhZGRpbmcgKi9cclxuICBjdXJzb3I6IHBvaW50ZXI7IC8qIENoYW5nZSBjdXJzb3Igb24gaG92ZXIgKi9cclxufVxyXG5cclxuLmRyb3Bkb3duLWNvbnRlbnQgdWwgbGk6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlOWU5ZTk7IC8qIENoYW5nZSBiYWNrZ3JvdW5kIG9uIGhvdmVyICovXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { HeaderComponent };","map":{"version":3,"names":["EventEmitter","HttpHeaders","NavigationEnd","filter","i0","ɵɵelementStart","ɵɵlistener","HeaderComponent_div_9_li_3_Template_li_click_0_listener","restoredCtx","ɵɵrestoreView","_r11","category_r9","$implicit","ctx_r10","ɵɵnextContext","ɵɵresetView","onCategorySelected","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵtemplate","HeaderComponent_div_9_li_3_Template","ɵɵproperty","ctx_r1","categories","HeaderComponent_li_14_Template_a_click_1_listener","_r13","ctx_r12","onLoginClicked","HeaderComponent_li_15_Template_a_click_1_listener","_r15","ctx_r14","onHideProductList","ctx_r4","username","HeaderComponent_li_17_Template_a_click_1_listener","_r17","ctx_r16","logout","HeaderComponent","onLoginCompleted","loginCompleted","emit","loginClicked","constructor","router","http","renderer","productService","cartService","userLoggedIn","refresh","hideProductList","showProductList","password","cartItemCount","selectedCategory","isMenuDisplayed","ngOnInit","localStorage","getItem","getCategories","subscribe","count","events","pipe","event","console","log","url","category","navigate","setSelectedCategory","get","data","toggleMenu","menuIcon","nativeElement","contains","target","handleClick","token","getCSRFToken","basicAuth","btoa","headers","post","withCredentials","removeItem","error","alert","message","updateCartItemCount","getCartSize","onShowProductList","returnToHomePage","createHeaders","csrfToken","append","ɵɵdirectiveInject","i1","Router","i2","HttpClient","Renderer2","i3","ProductService","i4","CartService","selectors","viewQuery","HeaderComponent_Query","rf","ctx","$event","ɵɵresolveDocument","HeaderComponent_Template_a_click_2_listener","ɵɵelement","HeaderComponent_div_9_Template","HeaderComponent_li_14_Template","HeaderComponent_li_15_Template","HeaderComponent_li_16_Template","HeaderComponent_li_17_Template","HeaderComponent_Template_a_click_19_listener","HeaderComponent_li_23_Template","ɵɵtextInterpolate"],"sources":["C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\header\\header.component.ts","C:\\Users\\msitr\\OneDrive\\Desktop\\ElectronicStore2\\Electronic_Store\\front-end\\src\\app\\header\\header.component.html"],"sourcesContent":["import { Component, OnInit, ElementRef, Renderer2, ViewChild, EventEmitter, Output, Input, HostListener } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { NavigationEnd, Router } from '@angular/router';\r\nimport { Category } from '../models/category.model';\r\nimport { CartService } from '../service/cart.service';\r\nimport { ProductService } from '../service/product.service';\r\nimport { filter } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.css']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n\r\n  @Output() userLoggedIn: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  @Output() loginClicked: EventEmitter<void> = new EventEmitter<void>();\r\n  @Output() loginCompleted: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  onLoginCompleted(): void {\r\n    this.loginCompleted.emit();\r\n  }\r\n  onLoginClicked(): void {\r\n    this.loginClicked.emit();\r\n  }\r\n\r\n  @Input() refresh: boolean = false;\r\n\r\n\r\n  @Output() hideProductList: EventEmitter<void> = new EventEmitter<void>();\r\n  @Output() showProductList: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  @ViewChild('dropdown', { static: true }) dropdown!: ElementRef;\r\n  @ViewChild('menuIcon', { static: true }) menuIcon!: ElementRef;\r\n\r\n  username: string | null = null;\r\n  password: string | null = null;\r\n  public categories: string[] = [];\r\n  \r\n  cartItemCount: number = 0;\r\n  selectedCategory: string = 'All';\r\n\r\n\r\n  constructor(private router: Router, private http: HttpClient, private renderer: Renderer2,private productService:ProductService,private cartService: CartService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.username = localStorage.getItem('username');\r\n    this.password = localStorage.getItem('password');\r\n    this.getCategories();\r\n\r\n    this.cartService.cartItemCount.subscribe((count: number) => {\r\n      this.cartItemCount = count;\r\n    });\r\n\r\n    this.router.events.pipe(\r\n      filter((event): event is NavigationEnd => event instanceof NavigationEnd)\r\n    ).subscribe((event: NavigationEnd) => {\r\n      // Refresh username\r\n      this.username = localStorage.getItem('username');\r\n      this.password = localStorage.getItem('password');\r\n      console.log(\"Show product events\");\r\n\r\n      // Emit hideProductList\r\n      if (event.url === '/' || event.url === '') {\r\n        this.showProductList.emit();\r\n        return;\r\n        // Execute some code here if navigated to home page\r\n      }\r\n      this.hideProductList.emit();\r\n\r\n      // // Emit hideProductList\r\n      // if (this.username) {\r\n      //   this.userLoggedIn.emit();\r\n      //   // Execute some code here when username exists\r\n      // }\r\n        \r\n\r\n    });\r\n\r\n  }\r\n\r\n  onCategorySelected(category: string): void {\r\n    this.router.navigate(['/']);\r\n\r\n    this.selectedCategory = category;\r\n    this.productService.setSelectedCategory(category);\r\n  }\r\n\r\n\r\n  getCategories() {\r\n    this.http.get<string[]>('http://localhost:8080/categories').subscribe((data: string[]) => {\r\n      this.categories = data;\r\n    });\r\n}\r\nisMenuDisplayed = false;\r\n\r\ntoggleMenu(event?: MouseEvent): void {\r\n  if (event) {\r\n    if (this.menuIcon.nativeElement.contains(event.target)) {\r\n      // Toggle the menu display when clicking on the menu icon.\r\n      this.isMenuDisplayed = !this.isMenuDisplayed;\r\n    } else if (this.isMenuDisplayed === true) {\r\n      // Close the menu when clicking outside and the menu is displayed.\r\n      this.isMenuDisplayed = false;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n@HostListener('document:click', ['$event'])\r\nhandleClick(event: MouseEvent): void {\r\n  this.toggleMenu(event);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  logout(): void {\r\n    const token = this.getCSRFToken();\r\n    \r\n    if (token) {\r\n       this.username = localStorage.getItem('username');\r\n      this.password = localStorage.getItem('password');\r\n      const basicAuth = 'Basic ' + btoa(this.username+ ':' + this.password);\r\n  \r\n      const headers = new HttpHeaders({\r\n        'x-csrf-token': token,\r\n        'Authorization': basicAuth\r\n      });\r\n  \r\n      this.http.post('http://localhost:8080/logout', {}, { headers: headers, withCredentials: true }).subscribe(() => {\r\n        this.username = null;\r\n        localStorage.removeItem('username');\r\n        this.router.navigate(['/']);\r\n      },\r\n      (error) => {\r\n        console.error(error);  // Log the error to console for debugging\r\n        // Use whatever method you prefer for showing the error to the user.\r\n        // This could be a simple alert, or a more user-friendly UI element in your application.\r\n        alert('Logout failed. Error: ' + error.message);\r\n      });\r\n    }\r\n  }\r\n  \r\n  \r\n\r\n  updateCartItemCount(): void {\r\n    this.cartItemCount = this.cartService.getCartSize();\r\n  }\r\n\r\n  onHideProductList(): void {\r\n    this.hideProductList.emit();\r\n  }\r\n  onShowProductList(): void {\r\n    this.hideProductList.emit();\r\n  }\r\n\r\n  returnToHomePage():void{\r\n    this.productService.setSelectedCategory(\"All\");\r\n    this.router.navigate(['/']);\r\n\r\n    this.showProductList.emit();\r\n    \r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  private createHeaders(): HttpHeaders {\r\n    const csrfToken = this.getCSRFToken();\r\n    const username = localStorage.getItem('username');\r\n    const password = localStorage.getItem('password');\r\n\r\n    let headers = new HttpHeaders();\r\n    if(csrfToken) {\r\n      headers = headers.append('x-csrf-token', csrfToken);\r\n    }\r\n\r\n \r\n\r\n    return headers;\r\n  }\r\n\r\n  private getCSRFToken(): string | null {\r\n    return localStorage.getItem('csrfToken');\r\n  }\r\n}\r\n","<div class=\"containerv2\">\r\n  <div style=\"display:inline-block\" class=\"logo\">\r\n    <a (click)=\"returnToHomePage()\">\r\n      <img src=\"assets/images/computer.jpg\" alt=\"Electronic Store\">\r\n    </a>\r\n  </div> \r\n  &nbsp;\r\n  <div style=\"display:inline-block\">\r\n    <span #menuIcon >  \r\n      <img id=\"menu_icon\" src=\"assets/images/menu_icon.png\" alt=\"Menu Icon\">\r\n    </span>\r\n  </div>\r\n  \r\n  <div #dropdown style=\"display:inline-block\" *ngIf=\"isMenuDisplayed\" class=\"dropdown-content\">\r\n    <ul>\r\n      <li (click)=\"onCategorySelected(category)\" *ngFor=\"let category of categories\">\r\n        {{ category }}\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  \r\n  <div class=\"search-bar\">\r\n    <input type=\"text\" placeholder=\"Search\">\r\n  </div>\r\n  <nav>\r\n    <ul>\r\n      <li *ngIf=\"!username\"><a routerLink=\"/login\" (click)=\"onLoginClicked()\">Login</a></li>\r\n      <li *ngIf=\"!username\"><a routerLink=\"/register\" (click)=\"onHideProductList()\">Register</a></li>\r\n      <li *ngIf=\"username\">Welcome, {{ username }}</li>\r\n      <li *ngIf=\"username\"><a (click)=\"logout()\">Log Out</a></li>\r\n      <li><a routerLink=\"/cart\" (click)=\"onHideProductList()\"><img src=\"assets/images/cart.png\" alt=\"Shopping Cart\"></a></li>\r\n      <span class=\"cart-item-count\">{{ cartItemCount }}</span>\r\n      <li *ngIf=\"username\"><a routerLink=\"/account\">Account</a></li>\r\n    </ul>\r\n  </nav>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}