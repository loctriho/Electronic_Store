{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../service/product.service\";\nclass PaginationComponent {\n  constructor(http, productService) {\n    this.http = http;\n    this.productService = productService;\n    this.apiUrl_all = \"http://localhost:8080/products/count\";\n    this.apiUrl_category = \"http://localhost:8080/products/{categoryType}/count\";\n    this.itemsPerPage = 10;\n    this.currentPage = 1;\n    this.pageChanged = new EventEmitter();\n    this.totalItems = 0;\n  }\n  ngOnInit() {\n    this.categorySubscription = this.productService.categorySelected$.subscribe(category => {\n      this.currentPage = 1;\n      this.fetchTotalItems();\n    });\n  }\n  fetchTotalItems() {\n    let currentCategory = this.productService.getCurrentCategory();\n    let apiUrl = currentCategory && currentCategory !== \"All\" ? this.apiUrl_category.replace('{categoryType}', currentCategory) : this.apiUrl_all;\n    this.http.get(apiUrl).subscribe(response => {\n      this.totalItems = response.totalCount;\n    });\n  }\n  get totalPages() {\n    return Math.ceil(this.totalItems / this.itemsPerPage);\n  }\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n  prevPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n}\nPaginationComponent.ɵfac = function PaginationComponent_Factory(t) {\n  return new (t || PaginationComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ProductService));\n};\nPaginationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PaginationComponent,\n  selectors: [[\"app-pagination\"]],\n  outputs: {\n    pageChanged: \"pageChanged\"\n  },\n  decls: 7,\n  vars: 2,\n  consts: [[1, \"pagination\"], [3, \"click\"]],\n  template: function PaginationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function PaginationComponent_Template_button_click_1_listener() {\n        return ctx.prevPage();\n      });\n      i0.ɵɵtext(2, \"Previous\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"span\");\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function PaginationComponent_Template_button_click_5_listener() {\n        return ctx.nextPage();\n      });\n      i0.ɵɵtext(6, \"Next\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", ctx.currentPage, \" / \", ctx.totalPages, \"\");\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { PaginationComponent };","map":{"version":3,"names":["EventEmitter","PaginationComponent","constructor","http","productService","apiUrl_all","apiUrl_category","itemsPerPage","currentPage","pageChanged","totalItems","ngOnInit","categorySubscription","categorySelected$","subscribe","category","fetchTotalItems","currentCategory","getCurrentCategory","apiUrl","replace","get","response","totalCount","totalPages","Math","ceil","nextPage","emit","prevPage","i0","ɵɵdirectiveInject","i1","HttpClient","i2","ProductService","selectors","outputs","decls","vars","consts","template","PaginationComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","PaginationComponent_Template_button_click_1_listener","ɵɵtext","ɵɵelementEnd","PaginationComponent_Template_button_click_5_listener","ɵɵadvance","ɵɵtextInterpolate2"],"sources":["C:\\Users\\msitr\\OneDrive\\Desktop\\AngularProject\\my-app\\src\\app\\pagination\\pagination.component.ts","C:\\Users\\msitr\\OneDrive\\Desktop\\AngularProject\\my-app\\src\\app\\pagination\\pagination.component.html"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ProductService } from '../service/product.service';\nimport { Subscription } from 'rxjs/internal/Subscription';\n\n@Component({\n  selector: 'app-pagination',\n  templateUrl: './pagination.component.html',\n  styleUrls: ['./pagination.component.css']\n})\nexport class PaginationComponent implements OnInit {\n  apiUrl_all: string = \"http://localhost:8080/products/count\";\n  apiUrl_category: string = \"http://localhost:8080/products/{categoryType}/count\";\n  itemsPerPage: number = 10;\n  currentPage: number = 1;\n  @Output() pageChanged = new EventEmitter<number>();\n  private categorySubscription!: Subscription;\n\n  totalItems: number = 0;\n\n  constructor(private http: HttpClient, private productService: ProductService) {}\n\n  ngOnInit() {\n    this.categorySubscription = this.productService.categorySelected$.subscribe(category => {\n      this.currentPage = 1;\n      this.fetchTotalItems();\n    });\n  }\n\n  fetchTotalItems() {\n    let currentCategory = this.productService.getCurrentCategory();\n    let apiUrl = (currentCategory && currentCategory !== \"All\") ? \n                 this.apiUrl_category.replace('{categoryType}', currentCategory) : \n                 this.apiUrl_all;\n\n    this.http.get<any>(apiUrl).subscribe(response => {\n      this.totalItems = response.totalCount;\n    });\n  }\n\n  get totalPages(): number {\n    return Math.ceil(this.totalItems / this.itemsPerPage);\n  }\n\n  nextPage() {\n    if (this.currentPage < this.totalPages) {\n      this.currentPage++;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n\n  prevPage() {\n    if (this.currentPage > 1) {\n      this.currentPage--;\n      this.pageChanged.emit(this.currentPage);\n    }\n  }\n}\n","<div class=\"pagination\">\n    <button (click)=\"prevPage()\">Previous</button>\n    <span>{{ currentPage }} / {{ totalPages }}</span>\n    <button (click)=\"nextPage()\">Next</button>\n  </div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}